$black:    #000000;
$dark:     #333333;
$grey:     #777777;
$light:    #bbbbbb;
$offwhite: #fafafa;
$white:    #ffffff;

$green:    #769F33;
$red:      #ff0000;
$lightred: #ff6961;
$egg:      #ffffcc;
$blue:     #55acee;


#patchchatmessenger {
	display: block; position: relative;

	ul#patchchatlist {
		display: inline-block;
		position: relative;
		margin: 0;
		list-style: none;

		li.patchchatlistitem {
			display: block;
			width: 300px;
			margin: 0;
			border-bottom: 1px solid #333333;
			cursor: pointer;

			&:hover {
				background: #cccccc;
			}

			&.active {

				a {
					background: $blue;
					color: $white;
				}
			}

			a {
				display: block; clear: both;
				width: auto; height: auto;
				padding: 10px;
				text-decoration: none;

				&:after {
					content: "";
					display: table;
					clear: both;
				}

				img {
					float: left;
					margin: 0 10px 0 0;
				}

				h3 {
					margin: 0;
				}
			}

		}

	}

	#patchchatboxes {
		display: block; position: relative; float: left;
		margin: 0;
		list-style: none;

		#patchchatinitbox {

			form {

				width: auto;
				padding: 10px;
				font-family: sans-serif;

				p {
					padding: 0; margin: 0;

					a {
						text-decoration: underline;
					}

					&.patchchat-message {
						color: $red;
					}
				}

				label {
					display: block;
					padding-top: 10px;
				}

				input {
					display: block;
					width: 100%;
					padding: 5px; margin-bottom: 10px;
					font-family: sans-serif;
				}

				input[type=submit] {
					padding: 10px; margin-top: 20px;
				}

				#patchchat-honeypot { display: none; }
			}

		}

		.patchchatbox {

			position: relative;
			margin: 0;

			border-right: 1px solid $black;
			border-bottom: 1px solid $black;
			border-left: 1px solid $black;
			background: $offwhite;

			&.active {
				ul.patchchatcomments, form { display: block !important; }
			}

			header {
				padding: 3px 6px;
				cursor: pointer;
				background: $light;
				font-size: 16px;

				.patchchat-spinner {
					display: none; float: right;
					margin: 6px;
				}

			}

			ul.patchchatcomments {

				padding: 10px 0; margin: 0 !important;
				overflow-y: scroll;

				li.patchchatcomment {

					display: block;
					margin-bottom: 0;

					list-style: none;
					clear: both;

					&:after {
						content: "";
						display: table;
						clear: both;
					}

					&.auto > span {
						display: inline-block; position: relative; float: right;
						width: auto;
						padding: 7px; margin: 5px 15px;

						font: {
							size: 13px;
							family: sans-serif;
						}
						line-height: 16px;
						text-align: left;

						border: 1px solid $light;
						border-radius: 2px;
						border-color: $dark;

						background-color: $egg;

						i.fa {
							padding-left: 5px;
						}
					}

					&:not(.auto) > span {
						display: inline-block; position: relative;
						max-width: 80%;
						padding: 5px 8px;
						margin: 3px 8px;
						font-size: 14px;
						font-family: sans-serif;
						line-height: 18px;
						border: 1px solid $light;
						border-radius: 5px;
						background-color: $offwhite;


						&:after, &:before {
							content: '';
							position: absolute;
							width: 0; height: 0;
							right: 100%; top: 50%;
							
							border: solid transparent;
							pointer-events: none;
						}

						&:before {
							border-color: rgba(187, 187, 187, 0);
							border-right-color: #bfbfbf;
							border-width: 7px;
							margin-top: -7px;
						}

						&:after {
							border-color: rgba(250, 250, 250, 0);
							border-right-color: #fafafa;
							border-width: 6px;
							margin-top: -6px;

							display: table; 
							clear: both;
						}
						
					}

					&.user > span {
						float: left;
					}
					&.agent > span {
						float: right;
						border-color: $dark;
					}

					&.subscriber > span {
						float: left;
						margin-left: 15px;
					}
					&.administrator > span {
						float: right;
						margin-right: 15px;
						border-color: $dark;
						background: lightblue;

						&:after, &:before {
							right: auto; left: 100%;
						}

						&:before {
							border-color: rgba(187, 187, 187, 0);
							border-left-color: $dark;
							border-width: 7px;
							margin-top: -7px;
						}

						&:after {
							border-color: rgba(250, 250, 250, 0);
							border-left-color: lightblue;
							border-width: 6px;
							margin-top: -6px;

							display: table; 
							clear: both;
						}
					}

					img {
						display: none;
					}

				}

			}

			form {

				textarea {
					width: 100%;
					min-height: 30px;
					padding: 5px 5px 0 5px;
					border: 0px $grey solid;
					border-top-width: 1px;
					font-family: sans-serif;
					resize: none;

					font-size: 14px;
					line-height: 18px;
					overflow-y: hidden; /* fixes scrollbar flash - kudos to @brettjonesdev */
				}

			}

		}
	}
}